
{
    "swagger": "2.0",
    "info": {
        "description": "This is a simple example NodeJS API project to demonstrate Swagger Documentation",
        "version": "1.0.0",
        "title": "Tasks API",
        "contact": {
            "email": "abc@gmail.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        }
    },
    "schemes": ["http"],
    "host": "localhost:3001",
    "basePath": "",
    "paths" : {
        "/clients/" : {
            "get" : {
                "summary" : "Get all clients",
                "description": "Gets all clients",
                "produces": ["application/json"],
                "parameters": [{  
                    "name":"filter",
                    "in":"query",
                    "description":"The field by which we filter the results",
                    "required":false,
                    "type":"string",
                    "default": "all",
                    "enum": ["all", "id"]
                 },
                 {  
                    "name":"page",
                    "in":"query",
                    "description":"The page number",
                    "required":false,
                    "type":"integer",
                    "default": "1"
                 },
                 {  
                    "name":"filterBy",
                    "in":"query",
                    "description":"Used only with the <b>filter</b> parameter to filter results",
                    "required":false
                }],
                "responses": {
                    "200": {
                        "description": "A response has been received",
                        "schema":{
                            "type": "object",
                            "properties":{
                                "status":{
                                    "type": "string",
                                    "description": "Status of the operation",
                                    "enum": ["OK", "ERROR"]
                                },
                                "totalRecordsNumber":{
                                    "type": "integer",
                                    "description": "Number of returned items"
                                },
                                "data":{
                                    "type": "object",
                                    "description": "The returned data"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/clients" : {
            "post" : {
                "summary" : "Create a new client",
                "description": "Handles the submit of the client form",
                "produces": ["application/json"],
                "consumes": ["application/json"],
                "parameters":[
                    {
                      "in": "body",
                      "name": "body",
                      "description": "Client object",
                      "required": false,
                      "schema": {
                        "$ref": "#/definitions/post_clients"
                      }
                    }
                ],                
                "responses": {
                    "200": {
                        "description": "A response has been received",
                        "schema": {
                            "type": "object",
                            "properties":{
                                "status":{
                                    "type": "string",
                                    "description": "Status of the operation",
                                    "enum": ["OK", "ERROR"]
                                },
                                "data":{
                                    "type": "integer",
                                    "description": "The ID of the newly created client"
                                }
                            }
                        }
                    }
                }
            },
            "put" : {
                "summary" : "Update a client",
                "description": "Update client data",
                "produces": ["application/json"],
                "parameters": [{  
                    "in": "body",
                    "name": "body",
                    "description": "Client object",
                    "required": false,
                    "schema": {
                      "$ref": "#/definitions/put_clients"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "A response has been received",
                        "schema": {
                            "type": "object",
                            "properties":{
                                "status":{
                                    "type": "string",
                                    "description": "Status of the operation",
                                    "enum": ["OK", "ERROR"]
                                }
                            }
                        }
                    }
                }
            },
            "delete":{
                "summary" : "Archive client",
                "description": "Moves the client data to a different table and deletes the client from the main DB table",
                "produces": ["application/json"],
                "consumes": ["text/plain"],
                "parameters":[{  
                    "name":"page",
                    "in":"body",
                    "description":"The page number",
                    "required":true,
                    "schema":{"type":"integer"}
                 }],
                 "responses": {
                    "200": {
                        "description": "A response has been received",
                        "schema": {
                            "type": "object",
                            "properties":{
                                "status":{
                                    "type": "string",
                                    "description": "Status of the operation",
                                    "enum": ["OK", "ERROR", "FAILED"]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/invoices" : {
            "post" : {
                "summary" : "Create a new invoice",
                "description": "Creates a new invoice",
                "produces": ["application/json"],
                "consumes": ["application/json"],
                "parameters":[
                    {
                      "in": "body",
                      "name": "Invoice object",
                      "required": true,
                      "schema": {
                        "$ref": "#/definitions/post_invoice"
                      }
                    }
                ],               
                "responses": {
                    "200": {
                        "description": "A response has been received",
                        "schema": {
                            "type": "object",
                            "properties":{
                                "status":{
                                    "type": "string",
                                    "description": "Status of the operation",
                                    "enum": ["OK", "ERROR"]
                                },
                                "data":{
                                    "type": "integer",
                                    "description": "The ID of the newly created client"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/expenses" : {
            "get" : {
                "summary" : "Get expenses",
                "description": "Gets all expenses",
                "produces": ["application/json"],
                "parameters": [{  
                    "name":"filter",
                    "in":"query",
                    "description":"The field by which we filter the results",
                    "required":true,
                    "type":"string",
                    "default": "interval",
                    "enum": ["interval"]
                 },
                 {  
                    "name":"filterBy",
                    "in":"query",
                    "description":"The time interval that is requested. Format is ddmmyy-ddmmyy",
                    "default": "010121-010122",
                    "required":true
                }],
                "responses": {
                    "200": {
                        "description": "A response has been received",
                        "schema":{
                            "type": "object",
                            "properties":{
                                "status":{
                                    "type": "string",
                                    "description": "Status of the operation",
                                    "enum": ["OK", "ERROR", "INVALID_REQUEST"]
                                },
                                "data":{
                                    "type": "object",
                                    "description": "The returned data"
                                }
                            }
                        }
                    }
                }
            },
            "post" : {
                "summary" : "Add expense",
                "description": "Add a new expense",
                "produces": ["application/json"],
                "consumes": ["application/json"],
                "parameters": [{
                    "in": "body",
                    "name": "Expense object",
                    "required": true,
                    "schema": {
                      "$ref": "#/definitions/post_expense"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "A response has been received",
                        "schema": {
                            "type": "object",
                            "properties":{
                                "status":{
                                    "type": "string",
                                    "description": "Status of the operation",
                                    "enum": ["OK", "ERROR"]
                                }
                            }
                        }
                    }
                }
            },
            "delete":{
                "summary" : "Delete expenses",
                "description": "Delete an expense from the DB",
                "produces": ["application/json"],
                "consumes": ["application/json"],
                "parameters":[{  
                    "name":"id",
                    "in":"body",
                    "description":"ID of the entry",
                    "required":true,
                    "type":"integer"
                 }],
                 "responses": {
                    "200": {
                        "description": "A response has been received",
                        "schema": {
                            "type": "object",
                            "properties":{
                                "status":{
                                    "type": "string",
                                    "description": "Status of the operation",
                                    "enum": ["OK", "ERROR", "FAILED"]
                                }
                            }
                        }
                    }
                }
            }
        }        
    }, 
    "definitions": {
        "todosResponse": {
            "type": "object",
            "properties": {
                "id": {
                     "type": "integer"
                },
                "task": {
                    "type": "string"
                },
                "assignee": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                }
            }
        },
        "Task": {
            "type": "object",
            "properties": {
                "task": {
                    "type": "string"
                },
                "assignee": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                }
            }
        },
        "InvalidResponse": {
            "type": "object",
            "properties": {
                "statusCode": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            }
        },
        "post_clients":{
            "properties": {
                "client_first_name":{
                    "type":"string",
                    "example":"Popescu",
                    "required":true      
                },
                "client_last_name":{
                    "type":"string",
                    "example":"Popescu",
                    "required":true       
                },
                "client_city":{
                    "type":"string",
                    "example":"Bacau",
                    "required":true 
                },
                "client_county":{
                    "type":"string",
                    "example":"Bacau",
                    "required":true       
                },
                "client_email":{
                    "type":"string",
                    "example":"mail@mail.com"      
                },
                "client_fiscal_1":{
                    "type":"string",
                    "example":"RO/1234/BCX"      
                },
                "client_fiscal_2":{
                    "type":"string",
                    "example":"JUI8888"      
                },
                "client_notes":{
                    "type":"string",
                    "example":"Niste informatii"      
                },
                "client_phone":{
                    "type":"string",
                    "example":"0712341212",
                    "required":true      
                },
                "client_street":{
                    "type":"string",
                    "example":"Strada Strazilor"      
                },
                "client_adress_number":{
                    "type":"string",
                    "example":"14B"
                },
                "client_type":{
                    "type":"string",
                    "example":"pers",
                    "enum":["pers", "comp"],
                    "description":"Use pers for normal clients and comp for companies"    
                },
                "client_zip":{
                    "type":"string",
                    "example":"606060"      
                }         
            }
        },
        "put_clients":{
            "required": [
                "name",
                "photoUrls"
            ],
            "properties": {
                "clientID":{
                    "type":"integer",
                    "example":"1"    
                },
                "dataToBeUpdated":{
                    "type":"object",
                    "properties": {
                        "client_first_name":{
                            "type":"string",
                            "example":"Popescu",
                            "required":false      
                        },
                        "client_last_name":{
                            "type":"string",
                            "example":"Popescu",
                            "required":false    
                        },
                        "client_city":{
                            "type":"string",
                            "example":"Bacau",
                            "required":false 
                        },
                        "client_county":{
                            "type":"string",
                            "example":"Bacau",
                            "required":false 
                        },
                        "client_email":{
                            "type":"string",
                            "example":"mail@mail.com",
                            "required":false       
                        },
                        "client_fiscal_1":{
                            "type":"string",
                            "example":"RO/1234/BCX",
                            "required":false       
                        },
                        "client_fiscal_2":{
                            "type":"string",
                            "example":"JUI8888",
                            "required":false       
                        },
                        "client_notes":{
                            "type":"string",
                            "example":"Niste informatii",
                            "required":false       
                        },
                        "client_phone":{
                            "type":"string",
                            "example":"0712341212",
                            "required":false     
                        },
                        "client_street":{
                            "type":"string",
                            "example":"Strada Strazilor",
                            "required":false       
                        },
                        "client_adress_number":{
                            "type":"string",
                            "example":"14B",
                            "required":false 
                        },
                        "client_type":{
                            "type":"string",
                            "example":"pers",
                            "enum":["pers", "comp"],
                            "description":"Use pers for normal clients and comp for companies",
                            "required":false     
                        },
                        "client_zip":{
                            "type":"string",
                            "example":"606060",
                            "required":false       
                        }         
                    }
                }                
            }
        },
        "post_invoice":{
            "properties": {
                "client_first_name":{
                    "type":"string",
                    "example":"Popescu",
                    "required":true      
                },
                "client_last_name":{
                    "type":"string",
                    "example":"Popescu",
                    "required":true       
                },
                "client_city":{
                    "type":"string",
                    "example":"Bacau",
                    "required":true 
                },
                "client_county":{
                    "type":"string",
                    "example":"Bacau",
                    "required":true       
                },
                "client_email":{
                    "type":"string",
                    "example":"mail@mail.com"      
                },
                "client_fiscal_1":{
                    "type":"string",
                    "example":"RO/1234/BCX"      
                },
                "client_fiscal_2":{
                    "type":"string",
                    "example":"JUI8888"      
                },
                "client_notes":{
                    "type":"string",
                    "example":"Niste informatii"      
                },
                "client_phone":{
                    "type":"string",
                    "example":"0712341212",
                    "required":true      
                },
                "client_street":{
                    "type":"string",
                    "example":"Strada Strazilor"      
                },
                "client_adress_number":{
                    "type":"string",
                    "example":"14B"
                },
                "client_type":{
                    "type":"string",
                    "example":"pers",
                    "enum":["pers", "comp"],
                    "description":"Use pers for normal clients and comp for companies"    
                },
                "client_zip":{
                    "type":"string",
                    "example":"606060"      
                },
                "billingProducts":{
                    "description":"An array containing the information of the billed products",
                    "properties":{
                        "product_name":{
                            "type": "string",
                            "description": "Name of the billed product"                                
                        },
                        "um":{
                            "type": "string",
                            "description": "Measurement unit"                                
                        },
                        "quantity":{
                            "type": "integer",
                            "description": "Quantity"                                
                        },
                        "tax":{
                            "type": "integer",
                            "description": "Applied tax value"                                
                        },
                        "ppi":{
                            "type": "float",
                            "description": "Price per item"                                
                        },
                        "total_price":{
                            "type": "float",
                            "description": "Total price of the products expressed as quantity times price per item"                                
                        }
                    }
                }
            }
        },
        "post_expense":{
            "properties": {
                "exp_name":{
                    "type":"string",
                    "example":"Cheltuiala",
                    "required":true      
                },
                "exp_sum":{
                    "type":"float",
                    "example":"54.5",
                    "required":true       
                },
                "exp_description":{
                    "type":"string",
                    "example":"Descriere cheltuiala",
                    "required":true 
                },
                "exp_date":{
                    "type":"date",
                    "example":"2021-01-01",
                    "required":true       
                },
                "exp_deduct":{
                    "type":"boolean",
                    "example":"true",
                    "description":"Is this expense deductible?",
                    "required":true       
                }
            }
        }
    }
}